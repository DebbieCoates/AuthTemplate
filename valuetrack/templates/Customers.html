{% extends 'base.html' %}
{% load static %}

{% block content %}
<h1>Customers ({{ customer_count }})</h1>
<br>

<!-- Add Customer Button -->
<div class="mt-4 text-end">
  <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addCustomerModal">
    Add Customer
  </button>
</div>

<!-- Customer Table -->
<table class="table table-striped table-hover table-bordered" style="margin-top: 20px">
  <thead>
    <tr>
      <th scope="col">Name</th>
      <th scope="col">Main Contact</th>
      <th scope="col">Hayley Account Manager</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for wrapped in customers %}
      {% with customer=wrapped.customer form=wrapped.form %}
        <tr>
          <td><a href="{% url 'customer' customer.id %}">{{ customer.name }}</a></td>
          <td>{{ customer.main_contact }}</td>
          <td>{{ customer.hayley_account_manager }}</td>
          <td>
            <a href="#" data-bs-toggle="modal" data-bs-target="#editCustomerModal{{ customer.id }}">Edit</a> &nbsp; | &nbsp;
            <a href="{% url 'customer_delete' customer.id %}">Delete</a>
          </td>
        </tr>
        
        <!-- Edit Customer Modal -->
        {% include 'edit_customer_modal.html' %}

      {% endwith %}
    {% endfor %}
  </tbody>
</table>

  <!-- Add Customer Modal -->
 {% include 'add_customer_modal.html' %}

{% endblock %}